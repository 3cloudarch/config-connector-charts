{{- if and .Values.name (not .Values.projects) }}
---
apiVersion: resourcemanager.cnrm.cloud.google.com/v1beta1
kind: Project
metadata:
  labels:
  {{- include "project-config-connector.labels" . | nindent 4 }}
    {{- if .Values.labels }}
    {{- toYaml .Values.labels | nindent 4 }}
  {{- end  }}
  {{- with .Values.annotations  }}
  annotations:
    {{- toYaml . | nindent 4 }}  
  {{- end  }}
  name: {{ required "Projec name is required" .Values.name | quote }}
spec:
  name: {{ default .Values.name .Values.projectName | quote }}
  {{- if .Values.billingAccountRef }}
  billingAccountRef:
    {{- with .Values.billingAccountRef }}
    external: {{ .external | default nil | quote }}
    name: {{ .name | default nil | quote }}
    namespace: {{ .namespace | default nil | quote }}
    {{- end }}
    {{- end }}
  {{- if .Values.folderRef }}
  folderRef:
    {{- with .Values.folderRef }}
    external: {{ .external | default nil | quote }}
    name: {{ .name | default nil | quote }}
    namespace: {{ .namespace | default nil | quote }}
    {{- end }}
    {{- end }}
  {{- if .Values.organizationRef }}
  organizationRef:
  {{- with .Values.organizationRef }}
    external: {{ .external | default nil | quote }}
    name: {{ .name | default nil | quote }}
    namespace: {{ .namespace | default nil | quote }}
  {{- end }}
  {{- end }}
  {{- if .Values.resourceID }}
  resourceID: {{ .Values.resourceID | quote }}
  {{- end }}
{{- end  }}
